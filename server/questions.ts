/**
 * Система вопросов для интервью по бизнес-процессам
 * Основана на методологии из pasted_content_2.txt
 */

export interface Question {
  id: string;
  block: string;
  text: string;
  type: "text" | "textarea" | "select" | "multiselect" | "number";
  options?: string[];
  placeholder?: string;
  required: boolean;
  isKeyQuestion?: boolean; // Входит ли в сокращенную версию (10 вопросов)
}

/**
 * Полный список вопросов (50 штук) по 7 блокам
 */
export const FULL_QUESTIONS: Question[] = [
  // Блок А. Компания и модель бизнеса
  {
    id: "A1",
    block: "A",
    text: "Кратко опишите вашу компанию: чем занимаетесь, в каких регионах работаете, сколько лет на рынке?",
    type: "textarea",
    placeholder: "Например: Мы — агентство таргетированной рекламы, работаем в РФ и СНГ, на рынке 5 лет...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "A2",
    block: "A",
    text: "Какова основная бизнес-модель?",
    type: "select",
    options: ["B2B", "B2C", "B2G", "Смешанная"],
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "A3",
    block: "A",
    text: "Каков портрет идеального клиента: размер компании/частного клиента, годовой оборот (если B2B), отрасль, география?",
    type: "textarea",
    placeholder: "Например: Малый и средний бизнес, оборот 50-500 млн руб/год, e-commerce, Москва и регионы...",
    required: true,
  },
  {
    id: "A4",
    block: "A",
    text: "Какие ключевые сегменты клиентов вы выделяете (2–5 сегментов)?",
    type: "textarea",
    placeholder: "Например: 1) Интернет-магазины, 2) Производители товаров, 3) Сервисные компании...",
    required: false,
  },
  {
    id: "A5",
    block: "A",
    text: "Какие основные продукты/услуги приносят вам 80% выручки?",
    type: "textarea",
    placeholder: "Например: Таргетированная реклама в Яндекс.Директ и ВКонтакте, ведение рекламных кампаний...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "A6",
    block: "A",
    text: "Какой тип взаимодействия доминирует?",
    type: "select",
    options: ["Разовые сделки", "Абонентское обслуживание/подписка", "Долгосрочные проекты", "Гибрид"],
    required: true,
  },
  {
    id: "A7",
    block: "A",
    text: "Каков типичный средний чек и диапазон (минимум/максимум) по сделкам?",
    type: "text",
    placeholder: "Например: Средний чек 150 000 руб, диапазон 50 000 - 500 000 руб",
    required: true,
  },
  {
    id: "A8",
    block: "A",
    text: "В каких регионах/странах вы фактически ведёте проекты и есть ли различия по процессам между регионами?",
    type: "textarea",
    required: false,
  },
  {
    id: "A9",
    block: "A",
    text: "Есть ли выраженная сезонность/пики нагрузки в течение года?",
    type: "textarea",
    placeholder: "Например: Пики в ноябре-декабре (перед Новым годом), спад в июле-августе...",
    required: false,
  },
  {
    id: "A10",
    block: "A",
    text: "Какие стратегические цели стоят по этому процессу на 1–3 года (рост выручки, маржи, скорости, качества и т.д.)?",
    type: "textarea",
    required: false,
  },

  // Блок B. Клиентский путь и рамки процесса
  {
    id: "B11",
    block: "B",
    text: "Какое событие/действие клиента или сотрудника является триггером начала процесса?",
    type: "textarea",
    placeholder: "Например: Входящая заявка через форму на сайте, звонок клиента, заполненный бриф...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "B12",
    block: "B",
    text: "Что является объективным критерием завершения процесса и его идеальным финалом?",
    type: "textarea",
    placeholder: "Например: Подписанный акт выполненных работ, оплата, положительный отзыв, продление договора...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "B13",
    block: "B",
    text: "Опишите основную «историю клиента» в 3–7 шагах своими словами: как он проходит путь от первого контакта до финала?",
    type: "textarea",
    placeholder: "Например: 1) Заявка → 2) Консультация → 3) КП → 4) Договор → 5) Запуск → 6) Ведение → 7) Отчет",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "B14",
    block: "B",
    text: "Какова средняя продолжительность цикла сделки/проекта: от первого контакта до запуска работ; от запуска до полного завершения?",
    type: "text",
    placeholder: "Например: До запуска 7-14 дней, до завершения 1-3 месяца",
    required: true,
  },
  {
    id: "B15",
    block: "B",
    text: "Каков минимальный и максимальный срок цикла (быстрый и самый длинный кейсы)?",
    type: "text",
    placeholder: "Например: Минимум 3 дня, максимум 6 месяцев",
    required: false,
  },
  {
    id: "B16",
    block: "B",
    text: "Какой у вас средний ежемесячный объём: количество новых заявок, новых сделок, одновременно активных проектов?",
    type: "text",
    placeholder: "Например: 50 заявок, 15 новых сделок, 30 активных проектов",
    required: false,
  },
  {
    id: "B17",
    block: "B",
    text: "На каких этапах чаще всего сделки «застревают» или сильно растягиваются по времени?",
    type: "textarea",
    placeholder: "Например: Согласование договора, ожидание оплаты, согласование креативов...",
    required: false,
  },
  {
    id: "B18",
    block: "B",
    text: "Есть ли этапы, которые часто выполняются параллельно (разные отделы делают что-то одновременно)?",
    type: "textarea",
    required: false,
  },
  {
    id: "B19",
    block: "B",
    text: "Какие типичные сценарии для «повторного клиента» (возврат, доп.продажа, продление контракта)?",
    type: "textarea",
    required: false,
  },
  {
    id: "B20",
    block: "B",
    text: "Есть ли отдельный поток для VIP-клиентов/крупных заказчиков, отличающийся по шагам или людям?",
    type: "textarea",
    required: false,
  },

  // Блок C. Каналы, ИТ-системы и данные
  {
    id: "C21",
    block: "C",
    text: "Через какие каналы к вам приходят клиенты?",
    type: "multiselect",
    options: ["Сайт", "Телефон", "Мессенджеры", "Офлайн-офис", "Маркетплейсы", "Тендеры", "Партнёры", "Социальные сети", "Email"],
    required: true,
  },
  {
    id: "C22",
    block: "C",
    text: "Какие ИТ-системы вы используете?",
    type: "multiselect",
    options: ["CRM", "ERP", "1С", "HelpDesk", "Таск-трекеры", "BI-системы", "Телефония", "Почтовые сервисы", "Другое"],
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "C23",
    block: "C",
    text: "В какой системе хранится основная информация о клиентах и сделках (единый источник правды)?",
    type: "text",
    placeholder: "Например: Битрикс24, amoCRM, собственная CRM...",
    required: true,
  },
  {
    id: "C24",
    block: "C",
    text: "Существуют ли интеграции между системами (сайт → CRM, CRM → 1С, телефония → CRM и т.д.) и какие?",
    type: "textarea",
    required: false,
  },
  {
    id: "C25",
    block: "C",
    text: "Есть ли отдельный блок, связанный с участием в тендерах, госзакупках, коммерческих конкурсах?",
    type: "textarea",
    required: false,
  },
  {
    id: "C26",
    block: "C",
    text: "Какие отчёты и дашборды вы сейчас регулярно смотрите по этому процессу?",
    type: "textarea",
    placeholder: "Например: Ежедневно - воронка продаж, еженедельно - конверсия по этапам, ежемесячно - выручка и маржа...",
    required: false,
  },
  {
    id: "C27",
    block: "C",
    text: "Какие данные/показатели для вас критичны?",
    type: "multiselect",
    options: ["Конверсия", "Маржа", "Сроки", "NPS", "Количество ошибок", "LTV", "CAC", "Другое"],
    required: false,
  },

  // Блок D. Роли и ответственность
  {
    id: "D28",
    block: "D",
    text: "Перечислите все ключевые роли/должности, которые участвуют в этом процессе (без ФИО)",
    type: "textarea",
    placeholder: "Например: Менеджер по продажам, Аккаунт-менеджер, Таргетолог, Креатор, Руководитель проекта...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "D29",
    block: "D",
    text: "Какие зоны ответственности у каждой роли на уровне результата?",
    type: "textarea",
    placeholder: "Например: Менеджер по продажам - привлечение и закрытие сделки, Аккаунт-менеджер - ведение проекта и удовлетворенность клиента...",
    required: false,
  },
  {
    id: "D30",
    block: "D",
    text: "Есть ли роли, которые совмещают несколько функций?",
    type: "textarea",
    required: false,
  },
  {
    id: "D31",
    block: "D",
    text: "Кто принимает ключевые решения: по цене и скидкам, по согласованию договора, по запуску/остановке работ, по приёму результата?",
    type: "textarea",
    required: false,
  },
  {
    id: "D32",
    block: "D",
    text: "Есть ли формализованные должностные инструкции для этих ролей?",
    type: "select",
    options: ["Да, полностью соответствуют", "Да, но устарели", "Частично есть", "Нет"],
    required: false,
  },
  {
    id: "D33",
    block: "D",
    text: "Есть ли KPI для этих ролей, которые можно привязать к конкретным этапам процесса?",
    type: "textarea",
    required: false,
  },

  // Блок E. Регламенты, документы и юридическая часть
  {
    id: "E34",
    block: "E",
    text: "Существуют ли формализованные регламенты и инструкции, описывающие шаги текущего процесса?",
    type: "textarea",
    placeholder: "Например: Регламент работы с заявками, инструкция по подготовке КП, чек-лист запуска проекта...",
    required: false,
  },
  {
    id: "E35",
    block: "E",
    text: "Каких регламентов нет, но вы понимаете, что они нужны?",
    type: "textarea",
    required: false,
  },
  {
    id: "E36",
    block: "E",
    text: "Какие шаблоны документов уже используются?",
    type: "textarea",
    placeholder: "Например: Договор, КП, акт, заявка, чек-лист, форма отчёта, ТЗ...",
    required: false,
  },
  {
    id: "E37",
    block: "E",
    text: "Какие документы или согласования чаще всего задерживают движение сделки/проекта?",
    type: "textarea",
    required: false,
  },
  {
    id: "E38",
    block: "E",
    text: "Какие обязательные юридические/отраслевые требования нужно учесть?",
    type: "textarea",
    placeholder: "Например: Лицензии, СРО, стандарты, внутренние политики, безопасность данных...",
    required: false,
  },

  // Блок F. Время, SLA и качество
  {
    id: "F39",
    block: "F",
    text: "Есть ли формально установленные SLA для клиентов?",
    type: "textarea",
    placeholder: "Например: Ответ на заявку - до 2 часов, подготовка КП - до 3 дней, запуск проекта - до 7 дней...",
    required: false,
  },
  {
    id: "F40",
    block: "F",
    text: "Есть ли внутренние SLA между подразделениями и как они зафиксированы?",
    type: "textarea",
    required: false,
  },
  {
    id: "F41",
    block: "F",
    text: "Как вы сейчас отслеживаете соблюдение сроков?",
    type: "select",
    options: ["Вручную", "В CRM", "В таск-трекере", "По ощущениям", "Не отслеживаем"],
    required: false,
  },
  {
    id: "F42",
    block: "F",
    text: "Какие типичные ошибки/дефекты качества происходят в процессе?",
    type: "textarea",
    placeholder: "Например: Не те документы, неверные суммы, ошибки в данных, низкое качество услуги...",
    required: false,
  },
  {
    id: "F43",
    block: "F",
    text: "Как сейчас фиксируются и разбираются эти ошибки?",
    type: "select",
    options: ["Формально, есть процесс", "Неформально, на планерках", "Не разбираются"],
    required: false,
  },

  // Блок G. Исключения, риски и улучшения
  {
    id: "G44",
    block: "G",
    text: "Какие наиболее частые исключительные ситуации?",
    type: "textarea",
    placeholder: "Например: Споры с клиентом, переносы сроков, дополнительные работы, расторжение договоров, возвраты...",
    required: false,
  },
  {
    id: "G45",
    block: "G",
    text: "Есть ли для этих ситуаций отдельные регламенты/сценарии?",
    type: "select",
    options: ["Да, есть регламенты", "Частично есть", "Нет, решается по месту"],
    required: false,
  },
  {
    id: "G46",
    block: "G",
    text: "Какие 3–5 главных «болей» вы видите в текущем процессе?",
    type: "textarea",
    placeholder: "Например: 1) Долгое согласование договоров, 2) Потеря заявок, 3) Нет единой базы клиентов...",
    required: true,
    isKeyQuestion: true,
  },
  {
    id: "G47",
    block: "G",
    text: "Какие этапы вы считаете критичными и хотите контролировать особенно жёстко?",
    type: "textarea",
    required: false,
  },
  {
    id: "G48",
    block: "G",
    text: "Какие этапы вы хотели бы в первую очередь автоматизировать?",
    type: "textarea",
    placeholder: "Например: Автоматическое создание задач, напоминания о сроках, автогенерация документов, интеграции...",
    required: false,
  },
  {
    id: "G49",
    block: "G",
    text: "Есть ли связанные процессы, которые обязательно учитывать при моделировании?",
    type: "textarea",
    placeholder: "Например: Закупки, производство, логистика, сервис, кадровый, финансы...",
    required: false,
  },
  {
    id: "G50",
    block: "G",
    text: "В каком виде вы хотите получать итог и кто внутри компании будет этим пользоваться?",
    type: "textarea",
    placeholder: "Например: Визуальная схема для руководства, список шагов для CRM, регламент по ролям для сотрудников...",
    required: false,
  },
];

/**
 * Сокращенная версия анкеты - 10 самых важных вопросов
 * Помечены флагом isKeyQuestion: true
 */
export const SHORT_QUESTIONS: Question[] = FULL_QUESTIONS.filter((q) => q.isKeyQuestion);

/**
 * Группировка вопросов по блокам для удобного отображения
 */
export const QUESTION_BLOCKS = [
  { id: "A", title: "Компания и модель бизнеса", description: "Общая информация о компании, клиентах и продуктах" },
  { id: "B", title: "Клиентский путь и рамки процесса", description: "Описание процесса от начала до конца" },
  { id: "C", title: "Каналы, ИТ-системы и данные", description: "Технологии и инструменты, которые вы используете" },
  { id: "D", title: "Роли и ответственность", description: "Кто участвует в процессе и за что отвечает" },
  { id: "E", title: "Регламенты, документы и юридическая часть", description: "Документация и правовые аспекты" },
  { id: "F", title: "Время, SLA и качество", description: "Сроки выполнения и контроль качества" },
  { id: "G", title: "Исключения, риски и улучшения", description: "Проблемы и возможности для оптимизации" },
];

/**
 * Получить вопросы по типу анкеты
 */
export function getQuestionsByType(type: "full" | "short"): Question[] {
  return type === "full" ? FULL_QUESTIONS : SHORT_QUESTIONS;
}

/**
 * Получить вопросы блока
 */
export function getQuestionsByBlock(blockId: string, type: "full" | "short" = "full"): Question[] {
  const questions = getQuestionsByType(type);
  return questions.filter((q) => q.block === blockId);
}
